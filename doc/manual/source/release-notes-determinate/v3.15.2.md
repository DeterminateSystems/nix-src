# Release 3.15.2 (2026-01-20)

* Based on [upstream Nix 2.33.1](../release-notes/rl-2.33.md).

## What's Changed

### Improved performance for users with a lot of dependencies

If you even had the occasion to query your binary cache for over 110,000 store path simultaneously you might have found it rather slow.
Previously, Nix would enqueue all the downloads at once.
This appears to trigger quadratic behavior in curl.

Determinate Nix now enqueues a reasonable number of subtitutions once.
At the same time, we fixed a performance issue in the progress bar with so many dependencies.

PR: [DeterminateSystems/nix-src#315](https://github.com/DeterminateSystems/nix-src/pull/315)

### Lazy trees update: path inputs are now lazy

Previously inputs like `path:///path/to/a/dependency` were eagerly fetched when lazy-trees is enabled.
In Determinate Nix 3.15.2, path input types are also fetched lazily.
This change saves time and improves performance for users with path inputs.

PRs:
* [DeterminateSystems/nix-src#312](https://github.com/DeterminateSystems/nix-src/pull/312)
* [DeterminateSystems/nix-src#317](https://github.com/DeterminateSystems/nix-src/pull/317)

### `nix repl` now reports the Determinate version

A small change, but now `nix repl` correctly reports the Determinate Nix version:

```
$ nix repl
Nix (Determinate Nix 3.15.1) 2.33.0
Type :? for help.
nix-repl>
```

PR: [DeterminateSystems/nix-src#316](https://github.com/DeterminateSystems/nix-src/pull/316)

## New Contributors
* @dliberalesso made their first contribution in [DeterminateSystems/nix-src#313](https://github.com/DeterminateSystems/nix-src/pull/313)

**Full Changelog**: [v3.15.1...v3.15.2](https://github.com/DeterminateSystems/nix-src/compare/v3.15.1...v3.15.2)
